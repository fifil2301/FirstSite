<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∞–ø–µ—Ä - Heck.ai</title>
    <style>
        /* –ó–¥–µ—Å—å –±—É–¥–µ—Ç CSS –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä—ã */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
        }

        .game-container {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            padding: 25px;
            text-align: center;
        }

        .game-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            font-size: 1.2em;
            color: #555;
        }

        .board-container {
            display: grid;
            /* –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–±—Ü–æ–≤ –±—É–¥–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å—Å—è JavaScript –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–ª—è */
            /* grid-template-columns: repeat(10, 30px); */
            border: 2px solid #ccc;
            background-color: #ddd;
            gap: 1px; /* –ü—Ä–æ–º–µ–∂—É—Ç–∫–∏ –º–µ–∂–¥—É —è—á–µ–π–∫–∞–º–∏ */
        }

        .cell {
            width: 30px;
            height: 30px;
            background-color: #c0c0c0;
            border: 1px solid #808080;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            user-select: none; /* –ó–∞–ø—Ä–µ—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
        }

        .cell.revealed {
            background-color: #e0e0e0;
            border-color: #b0b0b0;
            cursor: default;
        }

        .cell.mine {
            background-color: #ff6b6b;
            color: white;
        }

        .cell.flagged {
            background-color: #ffd166;
            color: #333;
        }

        /* –¶–≤–µ—Ç–∞ –¥–ª—è —á–∏—Å–µ–ª */
        .cell.number-1 { color: #0000ff; } /* –°–∏–Ω–∏–π */
        .cell.number-2 { color: #008000; } /* –ó–µ–ª–µ–Ω—ã–π */
        .cell.number-3 { color: #ff0000; } /* –ö—Ä–∞—Å–Ω—ã–π */
        .cell.number-4 { color: #000080; } /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π */
        .cell.number-5 { color: #800000; } /* –ë–æ—Ä–¥–æ–≤—ã–π */
        .cell.number-6 { color: #008080; } /* –ë–∏—Ä—é–∑–æ–≤—ã–π */
        .cell.number-7 { color: #000000; } /* –ß–µ—Ä–Ω—ã–π */
        .cell.number-8 { color: #808080; } /* –°–µ—Ä—ã–π */

        .reset-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1.1em;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .reset-button:hover {
            background-color: #45a049;
        }

        .message {
            margin-top: 15px;
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
        }

        .message.win {
            color: #28a745; /* –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –ø–æ–±–µ–¥—ã */
        }

        .message.lose {
            color: #dc3545; /* –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã—à–∞ */
        }
    </style>
</head>
<body>
    <h1>–°–∞–ø–µ—Ä</h1>

    <div class="game-container">
        <div class="game-info">
            <div id="mines-left">–ú–∏–Ω—ã: 10</div>
            <div id="timer">–í—Ä–µ–º—è: 0</div>
        </div>

        <div id="board-container" class="board-container">
            <!-- –Ø—á–µ–π–∫–∏ –ø–æ–ª—è –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è JavaScript -->
        </div>

        <button id="reset-button" class="reset-button">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
        <div id="message" class="message"></div>
    </div>

    <script>
        // –ó–¥–µ—Å—å –±—É–¥–µ—Ç JavaScript –¥–ª—è –ª–æ–≥–∏–∫–∏ –∏–≥—Ä—ã
        const boardContainer = document.getElementById('board-container');
        const minesLeftDisplay = document.getElementById('mines-left');
        const timerDisplay = document.getElementById('timer');
        const resetButton = document.getElementById('reset-button');
        const messageDisplay = document.getElementById('message');

        const BOARD_SIZE = 10; // –†–∞–∑–º–µ—Ä –ø–æ–ª—è (10x10)
        const NUM_MINES = 10; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω

        let board = [];
        let timerInterval;
        let timeElapsed = 0;
        let minesFlagged = 0;
        let cellsRevealed = 0;
        let gameOver = false;
        let firstClick = true; // –ù–æ–≤—ã–π —Ñ–ª–∞–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–∫–∞

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initializeGame() {
            board = [];
            timeElapsed = 0;
            minesFlagged = 0;
            cellsRevealed = 0;
            gameOver = false;
            firstClick = true; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –ø—Ä–∏ –Ω–æ–≤–æ–π –∏–≥—Ä–µ
            messageDisplay.textContent = '';
            messageDisplay.className = 'message'; // –°–±—Ä–æ—Å –∫–ª–∞—Å—Å–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏—è

            minesLeftDisplay.textContent = `–ú–∏–Ω—ã: ${NUM_MINES}`;
            timerDisplay.textContent = `–í—Ä–µ–º—è: 0`;

            clearInterval(timerInterval);
            // –¢–∞–π–º–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ö–æ–¥–∞
            // timerInterval = setInterval(updateTimer, 1000); 

            createBoard();
            // –ú–∏–Ω—ã —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ö–æ–¥–∞
            // placeMines(); 
            // calculateNumbers(); // –ß–∏—Å–ª–∞ —Ç–æ–∂–µ –ø–æ—Å–ª–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –º–∏–Ω
            renderBoard();
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç–æ–π –¥–æ—Å–∫–∏
        function createBoard() {
            for (let r = 0; r < BOARD_SIZE; r++) {
                board[r] = [];
                for (let c = 0; c < BOARD_SIZE; c++) {
                    board[r][c] = {
                        isMine: false,
                        isRevealed: false,
                        isFlagged: false,
                        minesAround: 0
                    };
                }
            }
        }

        // –†–∞–∑–º–µ—â–µ–Ω–∏–µ –º–∏–Ω
        function placeMines(firstClickRow, firstClickCol) {
            let minesPlaced = 0;
            while (minesPlaced < NUM_MINES) {
                const r = Math.floor(Math.random() * BOARD_SIZE);
                const c = Math.floor(Math.random() * BOARD_SIZE);

                // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –º–∏–Ω–∞ –Ω–µ —Å—Ç–∞–≤–∏—Ç—Å—è –Ω–∞ —è—á–µ–π–∫—É –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–∫–∞
                // –∏ –Ω–µ —Å—Ç–∞–≤–∏—Ç—Å—è –Ω–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –º–∏–Ω—É
                if (!board[r][c].isMine && !(r === firstClickRow && c === firstClickCol)) {
                    board[r][c].isMine = true;
                    minesPlaced++;
                }
            }
        }

        // –†–∞—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–∏–Ω –≤–æ–∫—Ä—É–≥ –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–∏
        function calculateNumbers() {
            for (let r = 0; r < BOARD_SIZE; r++) {
                for (let c = 0; c < BOARD_SIZE; c++) {
                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º minesAround –¥–ª—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞
                    board[r][c].minesAround = 0; 
                    if (!board[r][c].isMine) {
                        let count = 0;
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º 8 —Å–æ—Å–µ–¥–Ω–∏—Ö —è—á–µ–µ–∫
                        for (let dr = -1; dr <= 1; dr++) {
                            for (let dc = -1; dc <= 1; dc++) {
                                if (dr === 0 && dc === 0) continue; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∞–º—É —è—á–µ–π–∫—É

                                const nr = r + dr;
                                const nc = c + dc;

                                if (nr >= 0 && nr < BOARD_SIZE && nc >= 0 && nc < BOARD_SIZE) {
                                    if (board[nr][nc].isMine) {
                                        count++;
                                    }
                                }
                            }
                        }
                        board[r][c].minesAround = count;
                    }
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –¥–æ—Å–∫–∏ –≤ HTML
        function renderBoard() {
            boardContainer.innerHTML = '';
            boardContainer.style.gridTemplateColumns = `repeat(${BOARD_SIZE}, 30px)`; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–±—Ü–æ–≤

            for (let r = 0; r < BOARD_SIZE; r++) {
                for (let c = 0; c < BOARD_SIZE; c++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.dataset.row = r;
                    cell.dataset.col = c;

                    const cellData = board[r][c];

                    if (cellData.isRevealed) {
                        cell.classList.add('revealed');
                        if (cellData.isMine) {
                            cell.classList.add('mine');
                            cell.innerHTML = 'üí£'; // –ë–æ–º–±–∞
                        } else if (cellData.minesAround > 0) {
                            cell.textContent = cellData.minesAround;
                            cell.classList.add(`number-${cellData.minesAround}`);
                        }
                    } else if (cellData.isFlagged) {
                        cell.classList.add('flagged');
                        cell.innerHTML = 'üö©'; // –§–ª–∞–∂–æ–∫
                    }

                    cell.addEventListener('click', handleCellClick);
                    cell.addEventListener('contextmenu', handleCellRightClick); // –ü—Ä–∞–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏
                    boardContainer.appendChild(cell);
                }
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ —è—á–µ–π–∫–µ (–ª–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞)
        function handleCellClick(event) {
            if (gameOver) return;

            const r = parseInt(event.target.dataset.row);
            const c = parseInt(event.target.dataset.col);
            const cellData = board[r][c];

            if (cellData.isRevealed || cellData.isFlagged) return;

            // –õ–æ–≥–∏–∫–∞ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–∫–∞
            if (firstClick) {
                firstClick = false;
                // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
                timerInterval = setInterval(updateTimer, 1000);

                // –†–∞–∑–º–µ—â–∞–µ–º –º–∏–Ω—ã, –∏—Å–∫–ª—é—á–∞—è —è—á–µ–π–∫—É –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–∫–∞
                placeMines(r, c);
                // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —á–∏—Å–ª–∞
                calculateNumbers();

                // –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–æ–¥ –ø–µ—Ä–≤—ã–º –∫–ª–∏–∫–æ–º –æ–∫–∞–∑–∞–ª–∞—Å—å –º–∏–Ω–∞ (—á—Ç–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π, –Ω–æ –¥–ª—è –ø–æ–¥—Å—Ç—Ä–∞—Ö–æ–≤–∫–∏)
                // –∏–ª–∏ –µ—Å–ª–∏ –º–∏–Ω–∞ –±—ã–ª–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞, —Ç–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º
                if (board[r][c].isMine) {
                    // –≠—Ç–æ–≥–æ –±–ª–æ–∫–∞ –ø–æ –∏–¥–µ–µ –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ, –µ—Å–ª–∏ placeMines —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
                    // –ù–æ –µ—Å–ª–∏ –≤–¥—Ä—É–≥, —Ç–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –º–∏–Ω—É –∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å
                    // –î–ª—è —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–∏, placeMines —É–∂–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–∏–Ω—ã –ø–æ–¥ –ø–µ—Ä–≤—ã–º –∫–ª–∏–∫–æ–º
                }
            }

            // –¢–µ–ø–µ—Ä—å, –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–∫–∞, –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω–æ
            if (cellData.isMine) {
                revealAllMines();
                endGame(false); // –ü—Ä–æ–∏–≥—Ä—ã—à
            } else {
                revealCell(r, c);
                checkWin();
            }
            renderBoard();
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ —è—á–µ–π–∫–µ (–ø—Ä–∞–≤–∞—è –∫–Ω–æ–ø–∫–∞)
        function handleCellRightClick(event) {
            event.preventDefault(); // –û—Ç–º–µ–Ω—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
            if (gameOver) return;

            const r = parseInt(event.target.dataset.row);
            const c = parseInt(event.target.dataset.col);
            const cellData = board[r][c];

            if (cellData.isRevealed) return;

            cellData.isFlagged = !cellData.isFlagged;
            if (cellData.isFlagged) {
                minesFlagged++;
            } else {
                minesFlagged--;
            }
            minesLeftDisplay.textContent = `–ú–∏–Ω—ã: ${NUM_MINES - minesFlagged}`;
            renderBoard();
            checkWin();
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ —è—á–µ–π–∫–∏
        function revealCell(r, c) {
            if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE) return; // –í—ã—Ö–æ–¥ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã
            const cellData = board[r][c];

            if (cellData.isRevealed || cellData.isFlagged || cellData.isMine) return;

            cellData.isRevealed = true;
            cellsRevealed++;

            if (cellData.minesAround === 0) {
                // –ï—Å–ª–∏ –≤–æ–∫—Ä—É–≥ –Ω–µ—Ç –º–∏–Ω, —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Å–æ—Å–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏
                for (let dr = -1; dr <= 1; dr++) {
                    for (let dc = -1; dc <= 1; dc++) {
                        if (dr === 0 && dc === 0) continue;
                        revealCell(r + dr, c + dc);
                    }
                }
            }
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –º–∏–Ω –ø—Ä–∏ –ø—Ä–æ–∏–≥—Ä—ã—à–µ
        function revealAllMines() {
            for (let r = 0; r < BOARD_SIZE; r++) {
                for (let c = 0; c < BOARD_SIZE; c++) {
                    if (board[r][c].isMine) {
                        board[r][c].isRevealed = true;
                    }
                }
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–±–µ–¥—É
        function checkWin() {
            const totalCells = BOARD_SIZE * BOARD_SIZE;
            const nonMineCells = totalCells - NUM_MINES;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ –Ω–µ-–º–∏–Ω–æ–≤—ã–µ —è—á–µ–π–∫–∏ –æ—Ç–∫—Ä—ã—Ç—ã
            if (cellsRevealed === nonMineCells) {
                endGame(true); // –ü–æ–±–µ–¥–∞
            }
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
        function endGame(win) {
            gameOver = true;
            clearInterval(timerInterval);
            if (win) {
                messageDisplay.textContent = '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏!';
                messageDisplay.classList.add('win');
            } else {
                messageDisplay.textContent = '–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏! –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ".';
                messageDisplay.classList.add('lose');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
        function updateTimer() {
            timeElapsed++;
            timerDisplay.textContent = `–í—Ä–µ–º—è: ${timeElapsed}`;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ"
        resetButton.addEventListener('click', initializeGame);

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        initializeGame();
    </script>
</body>
</html>
